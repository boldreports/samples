<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <link href="https://cdn.boldreports.com/6.1.34/content/v2.0/tailwind-light/bold.report-designer.min.css" rel="stylesheet" />
        <link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.37.0/codemirror.min.css" rel="stylesheet" />
        <link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.37.0/addon/hint/show-hint.min.css" rel="stylesheet" />

        <script src="https://cdn.boldreports.com/external/jquery-1.10.2.min.js" type="text/javascript"></script>
        <script src="https://cdn.boldreports.com/external/jsrender.min.js" type="text/javascript"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.37.0/codemirror.min.js" type="text/javascript"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.37.0/addon/hint/show-hint.min.js" type="text/javascript"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.37.0/addon/hint/sql-hint.min.js" type="text/javascript"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.37.0/mode/sql/sql.min.js" type="text/javascript"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.37.0/mode/vb/vb.min.js" type="text/javascript"></script>

        <!-- Report Designer component dependent scripts -->
        <script src="https://cdn.boldreports.com/6.1.34/scripts/v2.0/common/bold.reports.common.min.js"></script>
        <script src="https://cdn.boldreports.com/6.1.34/scripts/v2.0/common/bold.reports.widgets.min.js"></script>

        <!-- Report Viewer and Designer component scripts -->  
        <script src="https://cdn.boldreports.com/6.1.34/scripts/v2.0/bold.report-viewer.min.js"></script>
        <script src="https://cdn.boldreports.com/6.1.34/scripts/v2.0/bold.report-designer.min.js"></script>
    </head>
    <body>
        <!-- Creating a div tag which will act as a container for boldReportDesigner widget.-->
        <div style="height: 600px; width: 1250px; min-height: 400px;" id="designer"></div>
        <script type="text/javascript">
            var reportControlId = 'designer';
            var isCategoryRendered = false;
            $("#designer").boldReportDesigner({
                reportServerUrl: 'http://localhost:51913/reporting/api/site/site1',
                serviceUrl: 'http://localhost:51913/reporting/reportservice/api/Designer',
                //tslint:disable-next-line:max-line-length
                serviceAuthorizationToken: 'bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6ImFydW11Z2FzYW1pLm11cnVnZXNhbkBzeW5jZnVzaW9uLmNvbSIsIm5hbWVpZCI6IjEiLCJ1bmlxdWVfbmFtZSI6ImY5MGY4MWUxLTM4YjUtNDBlMy1hMjI2LWUyNzk0OTFmMzM1NCIsIklQIjoiOjoxIiwiaXNzdWVkX2RhdGUiOiIxNzE3NjY3NTI4IiwibmJmIjoxNzE3NjY3NTI4LCJleHAiOjE3MTgyNzIzMjgsImlhdCI6MTcxNzY2NzUyOCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MTkxMy9yZXBvcnRpbmcvc2l0ZS9zaXRlMSIsImF1ZCI6Imh0dHA6Ly9sb2NhbGhvc3Q6NTE5MTMvcmVwb3J0aW5nL3NpdGUvc2l0ZTEifQ.LWJRh6sYyFKpZQD3NdiOdEbFfwAUmr8E-5wW6jCcQv8',
                create: browseButton
                });


    function browseButton(args) {
    var designer = $('#' + reportControlId).data('boldReportDesigner');
    ej.ReportDesignerUtility.Toolbar.prototype.saveServerClick = function () {
        var browseDialog = this.designer.getInstance('BrowseDialog');
        browseDialog.allowRootSave = this.designer.allowRootSave;
        browseDialog.openBrowseDialog(this, 'saveServerReport', ej.ReportDesigner.BrowseType.Save, null, this.designer.reportFileName);
        if (!isCategoryRendered) {
            var footerTag = $('#' + reportControlId + '_footer_btn_div');
            var categoryButtonDiv = ej.buildTag('button', "New Category", {'float': 'left'}, { id: reportControlId + '_category_btn' });
            footerTag.append(categoryButtonDiv);
            var categoryButton = new ejs.buttons.Button({
                width: '83px', showRoundedCorner: false, size: 'mini', 'height': '25px',
            });
            categoryButtonDiv.appendTo(categoryButton[0]);
            categoryButtonDiv[0].onclick = publishOpen
            isCategoryRendered = true;
        }
    };
}

function publishOpen() {
    debugger;
    var designer = $('#' + reportControlId).data('boldReportDesigner');
    var proxy = this;
    designer.openPublishDialog("", false, function (args) {}, false, true, "", "");
}
        </script>
    </body>
</html>